<!DOCTYPE html>
<html ng-app="Caronte" xmlns="http://www.w3.org/1999/xhtml">
<head>
	<link href="CSS/metro.min.css" rel="stylesheet" />
	<link href="CSS/metro-icons.css" rel="stylesheet" />
	<link href="CSS/sitestyle.css" rel="stylesheet" />
	<script type="text/javascript" src="Scripts/jquery-2.1.4.min.js"></script>
	<script type="text/javascript" src="Scripts/metro.min.js"></script>
	<script src="Scripts/angular.min.js"></script>
	<script src="Scripts/angular-bing-maps.js"></script>
	<script charset="UTF-8" type="text/javascript" src="http://ecn.dev.virtualearth.net/mapcontrol/mapcontrol.ashx?v=7.0"></script>
	<script src="NG/Services/anagraficaService.js"></script>
	<script src="NG/Controllers/anagraficaController.js"></script>
	<script src="Scripts/app.js"></script>

	<title>Anagrafica - Project Caronte</title>
</head>
<body ng-controller="anagraficaController">
	<div class="tile-area fg-white bg-gray headerPadding" style="width:1024px">

		<div class="headerBar bg-grayDarker">
			<div class="tile-area-title">

				<span class="mif-arrow-left fg-white" onclick="window.location='Index.html'"></span>
				<span class="labelAlignment">Gestione Anagrafica</span>
			</div>
		</div>

		<div class="contentContainer">

			<div class="leftAlign">
				<button class="button" ng-click="newAnagrafica()">
					<span class="mif-plus"></span>
					<span class="labelAlignment"> Nuova anagrafica</span>
				</button>
			</div>

			<div class="tableContainer">
				<table class="table striped hovered bordered bg-white fg-black">
					<thead>
						<tr>
							<th>Codice Fiscale</th>
							<th>Cognome</th>
							<th>Nome</th>
							<th>Data di nascita</th>
							<th>Indirizzo</th>
							<th>N. Telefono</th>
							<th></th>
						</tr>
					</thead>
					<tbody>
						<tr ng-repeat="anagrafica in anagraficaList">
							<td width="200">{{anagrafica.CodiceFiscale}}</td>
							<td width="200">{{anagrafica.Cognome}}</td>
							<td width="200">{{anagrafica.Nome}}</td>
							<td width="150">{{ anagrafica.DataNascita | date: 'dd/MM/yyyy'}}</td>
							<td >{{anagrafica.Indirizzo}}</td>
							<td width="250">{{anagrafica.Telefono}}</td>

							<td width="80">
								<span class="mif-pencil fg-grayDark editCell" ng-click="editAnagrafica( anagrafica )"></span>&nbsp;
								<span class="mif-cancel fg-red editCell" ng-click="removeAnagrafica( anagrafica.IDAnagrafica )"></span>
							</td>
						</tr>
					</tbody>
				</table>
			</div>
			<div id="navcontainer">
				<ul class="leftAlign">
					<li><span ng-class="{true: 'paginateBtn', false: 'paginateDisabledBtn'}[currentPage != 0]" ng-click="showPage(0)">Prima</span></li>
					<li ng-repeat="nPage in pageNumbers">
						<span class="paginateBtn" ng-show="nPage != currentPage" ng-click="showPage(nPage)">{{nPage + 1}}</span>
						<span class="paginateSelectedBtn" ng-show="nPage == currentPage">{{nPage + 1}}</span>
					</li>
					<li>
						<span ng-class="{true: 'paginateBtn', false: 'paginateDisabledBtn'}[currentPage != pageNumbers.length - 1]" ng-click="showPage(pageNumbers.length-1)">Ultima</span>


					</li>

				</ul>
			</div>
		</div>
	</div>

	<div data-role="dialog" data-windows-style="true" data-height="100%" id="dialog" class="bg-grayDarker fg-black" style="text-align:center;">
		<div style="height:100%">
			<div style="width:100%; height:70px" class="fg-white">
				<h1>{{popupAna.type}} anagrafica</h1>
			</div>
			<form class="bg-white inputFormContainer" data-role="validator" name="toVal" novalidate onkeypress="return event.keyCode != 13;">

				<div ng-hide="isMapShowing">
					<table style="width:100%">
						<tr>
							<td style="text-align:left">Nome:</td>
							<td>
								<div class="input-control text">
									<input type="text" ng-model="popupAna.obj.Nome" data-validate-func="required" placeholder="Nome" required>
								</div>
							</td>
						</tr>
						<tr>
							<td style="text-align:left">Cognome:</td>
							<td>
								<div class="input-control text">
									<input type="text" ng-model="popupAna.obj.Cognome" data-validate-func="required" placeholder="Cognome" required>
								</div>
							</td>
						</tr>
						<tr>
							<td style="text-align:left">Codice fiscale:</td>
							<td>
								<div class="input-control text">
									<input type="text" ng-model="popupAna.obj.CodiceFiscale" data-validate-func="required" placeholder="Codice fiscale" required>
								</div>
							</td>
						</tr>
						<tr>
							<td style="text-align:left">Data di nascita:</td>
							<td>
								<div class="input-control text" data-format="yyyy/mm/dd" data-role="datepicker" >
									<input type="text" id="newDate" value="{{popupAna.obj.DataNascita | date: 'yyyy/MM/dd'}}" data-validate-func="required" required>
									<button class="button"><span class="mif-calendar"></span></button>
								</div>
							</td>
						</tr>
						<tr>
							<td style="text-align:left">Sesso:</td>
							<td>
								<div class="input-control select full-size">
									<select ng-model="popupAna.obj.Sesso" required data-validate-func="required" required>
										<option value="true">Uomo</option>
										<option value="false">Donna</option>
									</select>
								</div>
							</td>
						</tr>
						<tr>
							<td style="text-align:left">Telefono:</td>
							<td>
								<div class="input-control tel full-size">
									<input type="" ng-model="popupAna.obj.Telefono" placeholder="Telefono">
								</div>
							</td>
						</tr>
						<tr>
							<td style="text-align:left">Cellulare:</td>
							<td>
								<div class="input-control tel full-size">
									<input type="tel" ng-model="popupAna.obj.Cellulare" placeholder="Cellulare">
								</div>
							</td>
						</tr>
						<tr>
							<td style="text-align:left">Email:</td>
							<td>
								<div class="input-control text">
									<input type="email" ng-model="popupAna.obj.Email" placeholder="email">
									<span class="input-state-error mif-warning"></span>
									<span class="input-state-success mif-checkmark"></span>


								</div>
							</td>
						</tr>
						<tr>
							<td style="text-align:left">Indirizzo:</td>
							<td>
								<div class="input-control text" >
									<input type="text" readonly="readonly" ng-model="popupAna.obj.Indirizzo" data-validate-func="required" placeholder="Indirizzo" required>									
									<button class="button" ng-click="showMapDiv()">
										<span class="mif-map" />
									</button>
								</div>
							</td>
						</tr>
						<tr>
							<td />
							<td style="float:right">
								<input type="submit" ng-click="okEdit(toVal)" class="button" value="Salva" />
								<input type="button" ng-click="cancelEdit()" value="Annulla" />
							</td>
						</tr>
					</table>
				</div>

				<div style="width: 100%; height: 100%;" ng-show="isMapShowing">

					<div>
						<span style="padding-right:10px; width: 10%">Indirizzo</span>
						<div class="input-control text" style="width:90%" data-role="input">
							<input class="ng-pristine ng-untouched ng-valid" style="padding-right: 45.4px;" type="text"  placeholder="Indirizzo" ng-model="popupAna.TmpIndirizzo">
							<button class="button" ng-click="centerBingMap()">
								<span class="mif-location">
								</span>
							</button>
							
						</div>
					</div>
					<div style="height: 70%;">
						<div id="mappaBing" style="width: 100%; height: 100%;">

						</div>
						<div>
							<div style="float: right;">
								<input type="button" value="Salva" ng-click="okMapPosition()">
								<input type="button" value="Annulla" ng-click="cancelMapPosition()">
							</div>
						</div>
					</div>
				</div>
			</form>
		</div>
	</div>

</body>
</html>
